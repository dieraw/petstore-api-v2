# Petstore API Testing

Этот проект содержит тесты для Petstore API, построенного на Swagger. Тесты написаны с использованием JUnit 5 и RestAssured.

## Функциональность

Проект предоставляет тесты для следующих endpoints API:

- **Pet API:** CRUD операции с питомцами, загрузка изображений, поиск по статусу.
- **Store API:** CRUD операции с заказами, получение информации об инвентаре.
- **User API:** CRUD операции с пользователями, авторизация, логаут.

## Структура проекта

- `src/main/java/com/example/petstore/api/models`: Содержит модели данных, используемые для взаимодействия с API.
- `src/main/java/com/example/petstore/api/PetApiConfig.java`: Содержит классы конфигурации API.
- `src/test/java/com/example/petstore/api`: Содержит тестовые классы.
- `src/test/resources`: Содержит ресурсы для тестов (например, мок-изображения).

# Модели (Models)

В проекте используются следующие модели:

- **Pet**: Модель для питомцев, включает поля как `id`, `name`, `status` и т.д.
- **Order**: Модель для заказов, включает поля как `id`, `petId`, `quantity` и т.д.
- **User**: Модель для пользователей, включает поля как `id`, `username`, `password` и т.д.
## PetApiConfig

`PetApiConfig` — это класс конфигурации, содержащий настройки для взаимодействия с Petstore API. Он включает в себя базовый URL и пути к различным endpoint'ам, что упрощает процесс отправки запросов. Этот класс обеспечивает централизованное управление конфигурацией API, что позволяет легко изменять настройки в одном месте.

### Пример содержимого `PetApiConfig`:
```java
public class PetApiConfig {
    public static final String BASE_URL = "https://petstore.swagger.io/v2";
    public static final String PET_ENDPOINT = BASE_URL + "/pet/";
    public static final String FIND_BY_STATUS_ENDPOINT = BASE_URL + "/pet/findByStatus?status=";
    // Другие endpoints...
}
```

## Классы тестов

Проект включает в себя несколько классов тестов, каждый из которых отвечает за определенный функционал:

- **PetApiPositiveTest**: Содержит позитивные тесты для проверки успешных операций с питомцами, таких как добавление, обновление и удаление питомцев. Тесты подтверждают корректность работы API при валидных входных данных.
  
- **PetApiNegativeTest**: Содержит негативные тесты, которые проверяют обработку ошибок API при невалидных входных данных, например, некорректные ID питомцев или невалидные статусы.

- **PetApiTest**: Содержит общие тесты для проверки основных операций с питомцами, таких как получение информации о питомцах и поиск по статусу.

- **StoreApiBoundaryTest**: Тесты, проверяющие границы допустимых значений для Store API, такие как минимальные и максимальные значения параметров заказа.

- **StoreApiNegativeTest**: Содержит негативные тесты для проверки обработки ошибок API при невалидных данных для заказов, таких как некорректные идентификаторы заказов.

- **StoreApiTest**: Тесты для операций со Store API, включая создание и получение заказов. Эти тесты подтверждают, что API корректно обрабатывает заказы и предоставляет информацию о них.

- **UserApiNegativeTest**: Содержит негативные тесты, которые проверяют обработку ошибок API при невалидных данных для пользователей, таких как некорректные учетные данные при авторизации.

- **UserApiTest**: Содержит тесты для операций с пользователями, таких как регистрация, авторизация и выход из системы. Тесты подтверждают корректность обработки данных пользователей и их аутентификации.

# Отчёт о тестировании Petstore API

## 1. Введение
- **Проект**: Petstore API Testing
- **Цель отчёта**: Документирование результатов тестирования API Petstore с использованием JUnit и RestAssured.

## 2. Область тестирования
- **API Endpoints**:
  - Pet API: /pet
  - Store API: /store/order
  - User API: /user
- **Основные цели**:
  - Проверка работы CRUD операций для питомцев, заказов и пользователей.
  - Проверка правильности обработки невалидных данных.

## 3. Типы тестирования
- **Функциональные тесты**: Проверка корректности работы всех основных функций API.
- **Негативные тесты**: Проверка обработки ошибок и невалидных данных.
- **Граничные тесты**: Проверка на граничных значениях входных данных.

## 4. Описание тестов
- **Инструменты**: JUnit 5, RestAssured.
- **Классы тестов**:
  - `PetApiTest`: Позитивные тесты для проверки добавления, изменения и удаления питомцев.
  - `PetApiNegativeTest`: Негативные тесты для проверки ошибок при невалидных запросах.
  - `StoreApiTest`: Тесты для работы с заказами (создание, получение).
  - `UserApiTest`: Тесты для работы с пользователями (регистрация, авторизация).

## 5. Результаты тестирования
 Класс теста                                        | Всего тестов | Неудачи | Игнорировано | Продолжительность | Успешность |
|---------------------------------------------------|--------------|---------|--------------|-------------------|------------|
| `com.example.petstore.api.PetApiNegativeTest`     | 10           | 5       | 0            | 14.635s           | 50%        |
| `com.example.petstore.api.PetApiTest`             | 6            | 0       | 0            | 5.068s            | 100%       |
| `com.example.petstore.api.StoreApiBoundaryTest`   | 4            | 2       | 0            | 4.934s            | 50%        |
| `com.example.petstore.api.StoreApiNegativeTest`   | 5            | 3       | 0            | 19.025s           | 40%        |
| `com.example.petstore.api.StoreApiTest`           | 4            | 0       | 0            | 12.093s           | 100%       |
| `com.example.petstore.api.UserApiNegativeTest`    | 6            | 4       | 0            | 6.948s            | 33%        |
| `com.example.petstore.api.UserApiTest`            | 8            | 0       | 0            | 15.944s           | 100%       |
## 6. Проблемы и баги
## Подробности о тестах

### 1. `PetApiNegativeTest`
- **Всего тестов**: 10
- **Неудачи**: 5
- **Причины неудач**: 
  - `testFindPetsByInvalidStatusReturns400`: проверяет обработку невалидного статуса питомца, API возвращает OK <200>, но мы ожидаем <400> Invalid status value.
  - `testInvalidDataTypeReturns400`: проверяет обработку невалидного ID питомца, API возвращает OK <200>, но мы ожидаем <400> Invalid ID supplied.
  - `testNonExistentIdReturns404`: проверяет обновление не существующего питомца, API возвращает OK <200>, но мы ожидаем <404> Pet not found.
  - `testMissingRequiredFieldsReturns400`: отправляем пустое имя, API возвращает OK <200>, но мы ожидаем <405> Invalid input.
  - `testNonExistentIdReturns404`: проверяет обновление не существующего питомца, API возвращает OK <200>, но мы ожидаем <404> Pet not found.

### 2. `PetApiTest`
- **Всего тестов**: 6
- **Неудачи**: 0
- **Причины неудач**: Все тесты прошли успешно.

### 3. `StoreApiBoundaryTest`
- **Всего тестов**: 4
- **Неудачи**: 2
- **Причины неудач**:
- `testGetOrderWithBelowMinBoundaryId`: проверяет значение, на единицу ниже допустимого в описании API, API возвращает <404> Order not found, но мы ожидаем <400> Invalid ID supplied.
- `testGetOrderWithAboveMaxBoundaryId`: проверяет значение, на единицу выше допустимого в описании API, API возвращает <200> OK, но мы ожидаем <400> Invalid ID supplied.
  
### 4. `StoreApiNegativeTest`
- **Всего тестов**: 5
- **Неудачи**: 3
- **Причины неудач**:
- `testDeleteOrderWithInvalidId`: проверяет удаление с не валидным id, API возвращает <404> Not Found, но мы ожидаем <400> Invalid ID.
- `testCreateOrderWithInvalidData`: проверяет не валидный Petid, API возвращает <200> OK, но мы ожидаем <400> Invalid input.
- `testGetOrderWithInvalidId`:проверяет get с невалидным id, API возвращает <404> Not Found, но мы ожидаем <400> Invalid ID.

### 5. `StoreApiTest`
- **Всего тестов**: 4
- **Неудачи**: 0
- **Причины неудач**: Все тесты прошли успешно.

### 6. `UserApiNegativeTest`
- **Всего тестов**: 6
- **Неудачи**: 4
- **Причины неудач**:
- `testUpdateNonExistentUser`: проверяет обновление не существующего пользователя, API возвращает <200> OK, но мы ожидаем <404> User not found.
- `testUserLoginWithInvalidCredentials`: проверяет авторизацию не существующего пользователя, API возвращает <200> OK, но мы ожидаем <400> Invalid username/password supplied.
- `testCreateUserWithoutUsername`: проверяет создание пользователя без username, API возвращает <200> OK, но мы ожидаем <400> username is required.
- `testCreateUserWithInvalidEmail`: проверяет создание пользователя с невалидным email, API возвращает <200> OK, но мы ожидаем <400> invalid email format.

### 7. `UserApiTest`
- **Всего тестов**: 8
- **Неудачи**: 0
- **Причины неудач**: Все тесты прошли успешно.
- post запрос при создании user возвращается c <200> OK и unknown вместо username или чем-то ещё, с этим мы смирились, потому что без создания user дальнейшее тестирование было бы бессмысленно, но подмечаю этот момент тут.


## 7. Рекомендации
- Обработать некорректные статусы питомцев в API.
- Исправить валидацию пользовательских данных.

## 8. Заключение
Тестирование выявило несколько ошибок в API, которые требуют исправления. Большинство позитивных сценариев выполнены успешно.


